<!-------------------------------------
jquery_08.html
---------------------------------------
	=>숫자만 입력받아 3자리마다 콤마를 제어 재입력하는 예제 -->
<html><meta charset="UTF-8">
<head>
	<script src = "jquery-1.11.0.min.js"></script>
	<script>
		//-------------------------------------------
		// $(document).ready(  function(){자스코딩}  );
		//-------------------------------------------
		// body 태그 안의 요소들을 읽어들인 후 익명함수 내부의 자스코딩을 실행.
		$(document).ready(function(){

			//-------------------------------------------
			// <1> class="money"를 가진 태그를 관리하는 JQuery 객체의 메위주 얻기
			// <2> Tip! class="money"가 있는지 확인하려면 moneyObj의 길이가 1이 나오는지 확인해보자
			// <3> 커서를 class="money" 가 있는 입력 양식에 들여놓는다.
			//-------------------------------------------
			var moneyObj = $(".money");		// <1>
			// alert(moneyObj.length);		// <2>
			moneyObj.focus();				// <3>

			//-------------------------------------------
			// class="money" 를 가진 입력 양식에 [keyup 이벤트]가 발생하여 임의 자스 코딩 실행하기
			//-------------------------------------------
			moneyObj.keyup(function(){

				//-------------------------------------------
				// <1> thisObj 변수 선언, 지금 이 태그의 JQuery 객체 생성하여 메위주 저장
				// <2> money 변수 선언, keyup 이벤트가 발생한 입력 양식의 value 값
				// 	즉, 유저가 입력한 데이터를 자바스크립트 영역으로 가져와 money 변수에 저장
				// <3> num 변수 선언, 숫자만 골라서 저장할 변수 선언
				// <4> 변수 result 선언, 콤마를 포함한 최종 숫자 문자열을 저장할 변수 선언
				// <5> 변수 cnt 선언, 0으로 저장, 숫자를 하나씩 복사해 오는 개수를 저장할 변수 선언
				//-------------------------------------------
				var thisObj = $(this);			// <1>
				var money = thisObj.val();		// <2>
				var num = "";					// <3>
				var result = "";				// <4>
				var cnt = 0;					// <5>

				//-------------------------------------------
				// money 변수 안의 데이터 중 숫자만 골라 num 변수에 누적 시킴
				//-------------------------------------------
				// <1> str 변수 선언, money 안의 문자열 중 i 번째 문자 하나를 저장
				// <2-1> (M.ver) "0" ~ "9" 사이라면
				// <2-2> "0123456789" 문자열 중 str안의 문자의 위치가 0보다 크다면(없을 경우 -1 리턴됨)
				// <2-3> RegExp 객체 생성하여 패턴 검사
				// <3> str 데이터를 num 변수에 누적시키기
				//-------------------------------------------
				// String 객체 메소드
				// charAt(인덱스번호) : 인덱스번호에 위치하는 문자 한 개를 복사해서 리턴, 인덱스번호는 0부터 시작
				// indexOf("찾는문자", 검색시작인덱스번호) : 찾는 문자가 위치한 곳의 인덱스 번호를 리턴
				//			만약 리턴값이 -1 이면 찾는문자가 없다라는 뜻이다.
				//-------------------------------------------
				for( var i = 0; i < money.length; i++ ) {
					var str = money.charAt(i);					// <1>
					// if(str >= "0" && str <= "9") {			// <2-1>
					if(("0123456789").indexOf(str) >= 0){		// <2-2>
					// if(new RegExp(/^[0-9]$/).test(str)){		// <2-3>
						num += str;								// <3>
					} 
				}

				//-------------------------------------------
				// <1> num에 데이터가 있다면, 데이터가 없는데 num을 parseInt() 메소드를 호출하면 오류가 발생한다.
				// <2> num을 숫자로 바꿔서 맨 앞에 0이 온 경우 0을 삭제한 후 문자로 변환하여 저장한다.
				//	숫자는 0, 0.01.. 같은 경우를 제외하면 맨 앞에 0이 올 수 없다.
				//-------------------------------------------
				// ★숫자 데이터는 0으로 시작할 수 없다. 불필요한 데이터를 제거하려면 정수로 바꾸면 된다.
				//-------------------------------------------
				// 내장함수: parseInt(숫자문자, 10): 10진수로 표현된 숫자문자를 정수로 리턴
				// 내장함수란? 자주 사용되는 기능을 가진 미리 만들어져 제공하는 함수
				//-------------------------------------------
				if(num.length > 0){						// <1>
					num = parseInt(num, 10) + "";		// <2>
				}

				//-------------------------------------------
				// 위 코딩은 아래 코드로도 가능하다. (while문)
				//-------------------------------------------
				// <1> 만약 num 변수 안의 문자 길이가 2자 이상이고 첫글자가 0으로 시작한다면 
				//	문자 길이가 2자 이상인 이유는 0 인 경우를 고려하기 위해서이다.
				// <2> num 변수 안의 문자에서 첫글자 이후를 복사해서 num 변수안에 재 저장하기
				//	결국 첫글자를 제외한 문자를 복사해서 num 변수 안에 저장하는 효과가 있다.
				//-------------------------------------------
				// while(num.length >= 2 && num.indexOf("0") == 0){	// <1>
				// 	num = num.substr(1);							// <2>
				// }

				//-------------------------------------------
				// 위 코딩은 아래 코드로도 가능하다. (for문)
				//-------------------------------------------
				// for( ; num.length >= 2 && num.indexOf("0") == 0 ;){
				// 	num = num.substr(1);
				// }

				//-------------------------------------------
				// num에서 맨 뒤에서 부터 하나씩 낚아채서 result 변수 누적 시킴
				// 이때 3의 배수만큼 낚아챌 때 콤마(,)를 앞에 넣어 누적 시킴
				//-------------------------------------------
				// <1> cnt를 1 증가시킨다, 데이터를 입력하였기 때문에
				// <2> cnt가 3의 배수라면
				// <3> result 변수에 , 를 포함한 입력 데이터를 누적시킨다.
				// <4> cnt가 3의 배수가 아니라면
				// <5> result 변수에 입력 데이터를 누적시킨다.
				//-------------------------------------------
				// 콤마를 넣는 단계에서 굳이 콤마가 첫글자인 경우를 고려할 필요 없다. 코드만 복잡해짐!
				//-------------------------------------------
				for( var i = num.length - 1; i >= 0; i--) {
					cnt++;										// <1>
					if(cnt%3 == 0){								// <2>
						result = "," + num.charAt(i) + result;	// <3>
					} else {									// <4>
						result = num.charAt(i) + result;		// <5>
					}
				}

				//-------------------------------------------
				// 맨 앞이 콤마로 시작하면 콤마 이후 글자를 낚아채서 result를 넣어줌
				//-------------------------------------------
				// <1> result 변수 안의 데이터가 "," 로 시작하면
				// <2> result 변수 안의 문자에서 첫글자 이후를 복사해서 result 변수안에 재 저장하기
				//	결국 첫글자 , 가 없어지는 효과가 나타난다.
				//-------------------------------------------
				// String 객체 메소드
				// substr(인덱스번호, 개수) : 인덱스번호부터 지정개수만큼 문자열을 복사해서 리턴
				//-------------------------------------------
				if(result.indexOf(",") == 0) {		// <1>
					result = result.substr(1);		// <2>
				}
				
				//-------------------------------------------
				// keyup 이벤트가 일어난 입력양식에 result 변수 안의 데이터 삽입하기
				// this에 변수 num의 데이터 입력해주기
				//-------------------------------------------
				thisObj.val(result);
			});

		});
	</script>
</head>


<body><center>
	<input type="text" class="money" name="money" size=20 maxlength=13>원<br>
	<div class="msg"></div>
</body>
</html>
























