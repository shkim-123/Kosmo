<html>
<head>
	<meta charset="UTF-8">
	<title>새 글쓰기</title>

	<!-- common_func.js 파일을 수입해 온다. -->
	<script src = "common_func.js"></script>

	<script>

		// 게시판 새글쓰기 화면에 입력한 데이터의 유효성 체크를 해주는
		// checkRegForm 함수 선언
		function checkRegForm() {
			
			//--------------------------------------------------
			// <1> 유저가 입력한 이름 가져와서 변수 writer에 저장하기
			// <2> 유저가 입력한 제목 가져와서 변수 subject에 저장하기
			// <3> 유저가 입력한 이메일 가져와서 변수 email 저장하기
			// <4> 유저가 입력한 내용 가져와서 변수 content 저장하기
			// <5> 유저가 입력한 비밀번호 가져와서 변수 pwd 저장하기
			//--------------------------------------------------
			var writer = document.boardRegForm.writer.value;    // <1>
			var subject = document.boardRegForm.subject.value;  // <2>
			var email = document.boardRegForm.email.value;		// <3>
			var content = document.boardRegForm.content.value;  // <4> 
			var pwd = document.boardRegForm.pwd.value;			// <5>
			

			//------------------------------------------------
			// 유저가 입력한 이름의 유효성 체크하기
			//------------------------------------------------
			// 한글 2~10자 사이의 문자열을 체크하는 RegExp 객체 생성
			var regExp = new RegExp(/^[가-힣]{2,10}$/);
			
			// 만약에 이름이 한글 2~10자 사이가 아니면
			if( !regExp.test(writer) ) {
				alert("이름은 한글 2~10자 사이만 입력해 주세요.");
				// 함수 중단
				return;
			}

			//------------------------------------------------
			// 유저가 입력한 제목의 유효성 체크하기
			//------------------------------------------------
			// 만약에 제목이 공백만 있거나, 비어있으면
			// if( subject.split(" ").join("") == "" ) {
			if ( isEmpty(subject) ) {
				alert("제목을 입력해 주세요.");
				// 제목 입력란 비우기
				document.boardRegForm.subject.value = "";
				// 함수 중단
				return;
			}

			// 만약에 제목의 길이가 2자~30자가 사이가 아니면
			if( !(subject.length >= 2 && subject.length <= 30) ) {
				alert("제목은 2자~30자 이하로 입력해 주세요.");
				// 함수 중단
				return;
			}

			//------------------------------------------------
			// 유저가 입력한 이메일의 유효성 체크하기
			//------------------------------------------------
			// 이메일 문자열을 체크하는 RegExp 객체 생성하기 (common_func.js 파일로 분리)
			// var regExp = new RegExp(/^([0-9a-zA-Z_-]+)@([0-9a-zA-Z_-]+)(\.[0-9a-zA-Z_-]+){1,2}$/);
			
			// 만약에 입력한 이메일이 이메일 문자 패턴이 아니면 (common_func.js 파일로 분리)
			// if( !regExp.test(email) ) {
			// isEmail() 함수 호출
			if( !isEmail(email) ) {
				alert("이메일을 형식에 맞게 입력해 주세요.");
				// 함수 중단
				return;
			}

			//------------------------------------------------
			// 유저가 입력한 내용의 유효성 체크하기
			//------------------------------------------------
			if( isEmpty(content) ) {
				alert("내용을 입력해 주세요.");
				// 내용 입력란 비우기
				document.boardRegForm.content.value = "";
				// 함수 중단
				return;
			}

			// 만약에 내용의 길이가 900자 보다 크면
			if( content.length > 900 ) {
				alert("내용은 900자 이하로 입력해 주세요.");
				// 함수 중단
				return;
			}

			//------------------------------------------------
			// 유저가 입력한 암호의 유효성 체크하기
			//------------------------------------------------
			// 암호 문자열을 숫자 4개만 체크하는 RegExp 객체 생성하기
			var regExp = new RegExp(/^[0-9]{4}$/);
			
			// 만약에 입력한 암호가 암호 문자 패턴이 아니면
			if( !regExp.test(pwd) ) {
				alert("암호는 숫자4자를 입력해 주세요.");
				// 함수 중단
				return;
			}

			// alert(writer + ", " + subject + ", " + email + ", " + content + ", " + pwd);

		}

	</script>

</head>

<body>

<center>
<br><br>
	<div style = "padding:10px;">[새 글쓰기]</div>
	
	<!-- 폼 태그 -->
	<form name = "boardRegForm">

	<!-- 내용 -->
	<table border = 1 style ="border-collapse:collapse" cellpadding = 7 bordercolor = "lightgray" width = "700vw">
		<tr>
			<th bgcolor = "#E9E9E9" width = "100vw"> 이름 </th>
			<td><input type = "text" name = "writer" size = "20" maxlength = "7"></td>
			<!-- name값은 DB와 동일하게 필수~~ -->
			<!-- 입력 가능한 최대 길이 -->
		<tr>

		<tr>
			<th bgcolor = "#E9E9E9"> 제목 </th>
			<td><input type = "text" name = "subject" size = "70" maxlength = "30"></td>
		<tr>

		<tr>
			<th bgcolor = "#E9E9E9"> 이메일 </th>
			<td><input type = "text" name = "email" size = "70" maxlength = "30"></td>
		<tr>

		<tr>
			<th bgcolor = "#E9E9E9"> 내용 </th>
			<td><textarea cols = "72" rows = "10" name = "content"></textarea></td>
			<!-- textarea 여러줄 입력, cols 한 행에 입력, rows는 몇 줄 입력인지 -->
		<tr>

		<tr>
			<th bgcolor = "#E9E9E9"> 비밀번호 </th>
			<td><input type = "password" name = "pwd"  maxlength = "4"></td>
		<tr>

	</table>
	<!-- /내용 -->

	<table><tr><td height = "3"></td></tr></table>

	<!-- 버튼 -->
	<input type = "button" value = "저장" onClick="checkRegForm();"> &nbsp;
	<input type = "reset" value = "초기화"> &nbsp;
	<input type = "button" value = "전체 글 보기" onClick = "location.replace('boardList.html');"> &nbsp;
	<input type = "button" value = "로그아웃" onClick = "location.replace('loginForm.html');">
	<!-- /버튼 -->

	</form>
	<!-- /폼 태그 -->

</center>	

</body>

</html>